# 个人心得  
## 个人信息
姓名： 王大鑫  
邮箱： wdxloyalty@gmail.com  
## 项目负责内容  
在本次的图像处理软件代码编写过程中，我主要负责了Model层的部分算法实现，包括调节图像的亮度和对比度、旋转图像、图像的裁剪、为图像添加滤镜等；同时我也负责了这些功能的ViewModel层的处理，将这些功能与View层正确的拼装起来。  

除了代码上的工作，我还负责配置了基于jenkins的持续集成环境。
> Jenkins 是一个开源项目，提供了一种易于使用的持续集成系统，使开发者从繁杂的集成中解脱出来，专注于更为重要的业务逻辑实现上。同时 Jenkins 能实施监控集成中存在的错误，提供详细的日志文件和提醒功能，还能用图表的形式形象地展示项目构建的趋势和稳定性。  

我们将jenkins配置在了ubuntu 14.04系统下，项目代码在Github中托管，每当有人向master分支push时，jenkins通过webhooks获得通知并进行构建。如果构建失败，系统会向责任人发送邮件告知错误信息。
## 代码细节
MVVM框架下，底层代码实现与界面实现分离，这就大大降低了模块间的耦合程度。`Model`类中以OpenCV中的Mat数据结构储存了图像的原始信息，然后调用类中的成员函数进行各种方法的处理。在每一次处理结束都要通知ViewModel以便ViewModel再通知View来更新界面。
下面是`Model`类的声明。

```c++
class Model
{
private:
     cv::Mat image; //for showing
     cv::Mat originImg; //for store the original
     cv::Mat interImg; //intermediate variable
     std::shared_ptr<Notification> update_display_data_notification;
public:
    Model(){}
    void set_update_display_data_notification(std::shared_ptr<Notification> notification);
    void open_file(std::string path);
    cv::Mat& get();
    cv::Mat& getOrigin();
    void notify();
    void save_file(std::string path);
    void save_bmp_file(std::string path);

    void alterBrightAndContrast(int nbright, int nContrast);
    /* When nbright = -200, the picture is almost full of black.
     * When nbright = 0, it shows the original picture.
     * When nbright = 200, the picture is almost full of white.
     * So we prefer to having 'nbright' between -150 to 150
     */

    /* When nContrast = 100, it shows the original picture.
     * When nContrast = 0, the picture is full of black.
     * When nContrast = 300, the picture has high contrast.
     * So here, nContrast should be from 0 to 300.
     */

    void detect_face();


    void filterReminiscence(); //Filter No.1
    void AeroGlassscence();          //Filter No.2
	void reset();
    void rotate(double angle);
    /* angle should be 'degree', such as 90 degree.
     * When angle is equal to 90 degree, the picture will turn right.
     */
    void crop(int x1, int y1, int x2, int y2);
};
```
## 心得体会  
该项目让我第一次经历正式的团队协作开发软件流程，使用现代化的工具有助于团队协作提升效率。Github代码托管方便我们进行代码的版本控制，MVVM架构能够让我们同时进行多个模块的代码编写，jenkins可以减轻我们集成工作的负担。在本次工程的开发工程中，我基本熟悉了团队开发软件的流程，能够在团队中高效工作，贡献代码。
